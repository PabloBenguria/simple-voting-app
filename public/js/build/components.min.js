"use strict";function ContentCtrl(t){this.User=t.get()}function LoginCtrl(){}function NavCtrl(t,o,e){var n=this;n.logout=function(){e.get(),n.user=null},n.initMaterialize=function(){$(function(){n.$dropdownButton=$(".dropdown-button").dropdown({inDuration:300,outDuration:225,constrainWidth:!1,gutter:0,belowOrigin:!0,alignment:"left",stopPropagation:!1})})},n.initMaterialize()}function PollCtrl(t,o){function e(){o({method:"GET",url:t+"poll"}).then(function(t){a.Polls=t,angular.forEach(t.data,function(t,o){r.data.datasets[0].data.push(t.users_voted.length),r.data.labels.push(t.name)},r.data.datasets[0].data),window.myPie.update()},function(t){console.log("Response error")})}function n(){a.Poll.users_voted=a.user.user.name,o({method:"PUT",url:t+"poll",data:a.Poll}).then(function(t){r.data.datasets[0].data=[],r.data.labels=[],a.showChart(),t.data.voted?Materialize.toast("Already voted!",3e3,"red lighten-1"):Materialize.toast("Vote saved!",3e3,"green accent-4")},function(t){console.log("Response error")})}var a=this;a.Poll={},a.saveVote=function(){a.user.user?n():Materialize.toast("Login to vote!",3e3,"red lighten-1")};var r={type:"pie",data:{datasets:[{data:[],backgroundColor:[window.chartColors.red,window.chartColors.green,window.chartColors.yellow,window.chartColors.blue],label:"Dataset 1"}],labels:[]},options:{responsive:!0}};a.showChart=function(){e();var t=document.getElementById("chart-area").getContext("2d");window.myPie=new Chart(t,r)};Object.keys(window.chartColors);a.initMaterialize=function(){$(function(){$("select").material_select()})},a.initMaterialize()}ContentCtrl.$inject=["UserSrv"],app.component("vaContent",{templateUrl:"components/content/content.html",controller:ContentCtrl}),app.factory("UserSrv",["$resource","API_URL",function(t,o){return t(o+"twitter",{id:"@id"},{update:{method:"PUT"},isArray:!1})}]),app.component("vaFooter",{templateUrl:"components/footer/footer.html"}),app.component("vaLogin",{templateUrl:"components/login/login.html",controller:LoginCtrl}),NavCtrl.$inject=["$document","API_URL","LogoutSrv"],app.component("vaNav",{templateUrl:"components/nav/nav.html",controller:NavCtrl,bindings:{user:"<"}}),app.factory("LogoutSrv",["$resource","API_URL",function(t,o){return t(o+"logout",{id:"@id"},{update:{method:"PUT"},isArray:!1})}]),PollCtrl.$inject=["API_URL","$http"],app.component("vaPoll",{templateUrl:"components/poll/poll.html",controller:PollCtrl,bindings:{user:"<"}});